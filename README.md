# Gagarin-hackathon
Телеграм-бот для быстрого заполнения анкетных данных, с интеграцией с YandexGPT для проекта «Код Памяти»

## Запуск на своем компьютере

* Установите в данную папку виртуальное окружение следующей командой: `python -m venv venv`

* Запустите виртуальное окружение командой
  * *windows*: `.\venv\Scripts\activate`
  * *linux, mac:* `source venv/bin/activate`

* Скачайте необходимые пакеты командой `pip install -r requirements.txt`

* Запустить бота командой `python main.py`

* Запустить бота командой `python main.py`

## MemoryCode: Структура и Конфигурация

Директория `memorycode` состоит из трех основных модулей: `config.py`, `wraps.py` и `api.py`. Ниже представлено их описание и функциональность.

### Модуль `config.py`

Модуль `config.py` отвечает за загрузку конфигурационных данных из переменных окружения. Это позволяет безопасно управлять чувствительными данными без их жесткой привязки к коду.

**Основные переменные**:
- `MEMORYCODE_BASE_URL`: Базовый URL для API MemoryCode.
- `MEMORYCODE_EMAIL`: Email для доступа к API.
- `MEMORYCODE_PASSWORD`: Пароль для доступа к API.

### Модуль `wraps.py`

Модуль `wraps.py` содержит декораторы и пользовательские исключения, которые используются для управления доступом и аутентификацией в API MemoryCode. Этот модуль помогает обеспечивать безопасность и правильное использование API путем валидации токенов доступа.

**Основные компоненты**:

- **`AuthenticationError`**: Класс исключения, который используется для указания ошибок аутентификации. Это исключение поднимается, когда токен доступа не найден или недействителен.

- **`require_auth`**: Декоратор, применяемый к асинхронным методам. Этот декоратор проверяет наличие токена доступа перед выполнением любого метода, который требует аутентификации. Если токен доступа отсутствует, декоратор поднимает исключение `AuthenticationError`, предотвращая выполнение метода.

### Модуль `api.py`

Модуль `api.py` содержит асинхронные функции для взаимодействия с API MemoryCode. Он использует библиотеку `aiohttp` для асинхронных HTTP-запросов.

**Основные функции**:
- `authenticate()`: Асинхронно получает токен доступа к API.
- `get_all_memory_pages()`: Асинхронно извлекает все страницы памяти.
- `get_individual_page_by_name()`: Асинхронно извлекает страницу памяти по имени.
- `update_memory_page()`: Асинхронно обновляет страницу памяти.
- `link_page()`: Асинхронно связывает страницы памяти.
- `upload_photo()`: Асинхронно загружает фотографию на сервер.
- `add_comment_to_page()`: Асинхронно добавляет комментарий к странице памяти.
